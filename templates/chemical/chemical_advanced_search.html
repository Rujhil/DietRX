<div class="row mt-3">
    <div class="col-md-5">
        <form id="chemical-search-form" action="{{ url_for('chemical_search') }}" method="GET">
            <!-- Common Name Input -->
            <div class="form-group">
                {{chemical_search_form.common_name.label}}
                {{chemical_search_form.common_name(class_="form-control", placeholder="Common Name") }}
            </div>

            <!-- IUPAC Name Input -->
            <div class="form-group">
                {{chemical_search_form.iupac_name.label}}
                {{chemical_search_form.iupac_name(class_="form-control", placeholder="IUPAC Name") }}
            </div>

            <!-- PubChem ID Input -->
            <div class="form-group">
                {{chemical_search_form.pubchem_id.label}}
                {{chemical_search_form.pubchem_id(class_="form-control", placeholder="PubChem ID") }}
            </div>

            <!-- Functional Group Input -->
            <div class="form-group">
                {{chemical_search_form.functional_group.label}}
                {{chemical_search_form.functional_group(class_="form-control", placeholder="Functional Group") }}
            </div>

            <!-- Other Fields (Molecular Weight, etc.) -->
            {% for form_field in [chemical_search_form.molecular_weight, chemical_search_form.hba_count, 
            chemical_search_form.hbd_count, chemical_search_form.num_rings, chemical_search_form.num_rotatablebonds,
            chemical_search_form.number_of_aromatic_bonds, chemical_search_form.alogp] %}
            <div class="form-group">
                {{form_field.label}}
                {{form_field(class_="form-control")}}
            </div>
            {% endfor %}

            <!-- Hidden SMILES field (populated with JSMe structure) -->
            <div>
                {{chemical_search_form.smiles(hidden=True)}}
            </div>

            <!-- Submit Button -->
            <div>
                {{chemical_search_form.search(class_="btn btn-dark btn-block mt-3")}}
            </div>
        </form>

        <!-- Submit Handling JavaScript -->
        <script>
            document.getElementById('chemical-search-form').addEventListener('submit', function (e) {
                const structure = document.getElementById('smiles').value;  
                const inputs = this.querySelectorAll('input[type="text"], input[type="number"], select, textarea');
                let allEmpty = true;

                if (!structure) {
                    inputs.forEach(input => {
                        if (input.value.trim() !== '') {
                            allEmpty = false;
                        }
                    });

                }

                // If structure is provided, proceed with it
                if (structure) {
                    document.getElementById("chemical-search-form").submit();
                }
            });
        </script>

    </div>

    <div class="col-md-1"></div>
    <div class="col-md-6">
        <div class="pt-1" id="jsme_container_search"></div>
    </div>
</div>